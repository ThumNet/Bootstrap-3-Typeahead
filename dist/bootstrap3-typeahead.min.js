/*!
* bootstrap3-typeahead
*   https://github.com/thumnet/Bootstrap-3-Typeahead
*
*   Original written by @mdo and @fat
*   Forked from: https://github.com/bassjobsen/Bootstrap-3-Typeahead
*
*/
!function(a,b){"use strict";"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery"),a.minitemplate):"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(c,a.minitemplate)}):b(a.jQuery,a.minitemplate)}(this,function(a,b){"use strict";var c=function(b,c){this.options=a.extend({},a.fn.typeahead.defaults,c),this.$element=a(b),this.$menu=a(this.options.menu),this.$appendTo=this.options.appendTo?a(this.options.appendTo):null,this.autoSelect="boolean"==typeof this.options.autoSelect?this.options.autoSelect:!0,this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus?this.options.showHintOnFocus:!1,this.onSearch="function"==typeof this.options.onSearch?this.options.onSearch:a.noop,this.onNew="function"==typeof this.options.onNew?this.options.onNew:a.noop,this.onSelect="function"==typeof this.options.onSelect?this.options.onSelect:a.noop,this.shown=!1,this.listen(),this.setSource(this.options.source)};c.prototype={constructor:c,select:function(){var a=this.$menu.find(".active").data("value");return a&&a!==this.options.searchItem?a===this.options.newItem?this.onNew(this.$element.val()):(this.autoSelect||a)&&(this.onSelect(a),this.$element.val(a[this.options.compareTo[0]]).change()):this.onSearch(this.$element.val()),this.shown?this.hide():this},setSource:function(b){a.isArray(b)&&b.length>0&&"string"==typeof b[0]&&(b=a.map(b,function(a){return{value:a}})),this.source=b},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),c="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight;return(this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element)).css({top:b.top+b.height+c,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){if("undefined"!=typeof b&&null!==b?this.query=b:this.query=this.$element.val()||"",this.query.length<this.options.minLength)return this.shown?this.hide():this;var c=a.proxy(function(){a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(c,this.options.delay)},process:function(b){var c=this,d=[];return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length||this.options.newItem?(b.length>0?this.$element.data("active",b[0]):this.$element.data("active",null),"all"!=this.options.items&&b.length>this.options.items&&(b=b.slice(0,this.options.items),this.options.searchItem&&d.push(this.options.searchItem)),this.options.newItem&&d.push(this.options.newItem),this.render(b,d).show()):this.shown?this.hide():this},matcher:function(a){for(var b=this.query.toLowerCase(),c=this.options.compareTo,d=0,e=c.length;e>d;d++)if(~a[c[d]].toLowerCase().indexOf(b))return!0;return!1},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();){var f=b[this.options.compareTo[0]];f.toLowerCase().indexOf(this.query.toLowerCase())?~f.indexOf(this.query)?d.push(b):e.push(b):c.push(b)}return c.concat(d,e)},highlighter:function(a){var b=new RegExp(this.query,"gi");return a.replace(b,function(a){return"<strong>"+a+"</strong>"})},highlightItem:function(b){var c=this,d={};return a.each(b,function(a,b){d[a]=c.highlighter(b)}),d},render:function(c,d){var e=this,f=!1;return c=a(c).map(function(c,d){c=a(e.options.item).data("value",d);var g=b(e.options.displayTemplate,e.highlightItem(d));return c.find("a").html(g),d[e.options.compareTo[0]]==e.$element.val()&&(c.addClass("active"),e.$element.data("active",d),f=!0),c[0]}),this.autoSelect&&!f&&(c.first().addClass("active"),this.$element.data("active",c.first().data("value"))),c.length>0&&d.length>0&&c.push(a(e.options.divider)[0]),a.each(d,function(b,d){b=a(e.options.item).data("value",d),b.find("a").text(d),c.push(b[0])}),this.$menu.html(c),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.hasClass("divider")&&(d=d.next()),d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.hasClass("divider")&&(c=c.prev()),c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown)switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:if(a.shiftKey)return;a.preventDefault(),this.prev();break;case 40:if(a.shiftKey)return;a.preventDefault(),this.next()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.shown||40!=b.keyCode?this.move(b):this.lookup()},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:this.shown&&this.hide();break;case 13:this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.preventDefault()},focus:function(a){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup())},blur:function(a){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var d=a.fn.typeahead;a.fn.typeahead=function(b){var d=arguments;return"string"==typeof b&&"getActive"==b?this.data("active"):this.each(function(){var e=a(this),f=e.data("typeahead"),g="object"==typeof b&&b;f||e.data("typeahead",f=new c(this,g)),"string"==typeof b&&(d.length>1?f[b].apply(f,Array.prototype.slice.call(d,1)):f[b]())})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a href="#" role="option"></a></li>',divider:'<li role="separator" class="divider"></li>',compareTo:["value"],displayTemplate:"{{value}}",minLength:1,scrollHeight:0,autoSelect:!0,newItem:!1,searchItem:!1,delay:0},a.fn.typeahead.Constructor=c,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=d,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||c.typeahead(c.data())})});/*!
* minitemplate
*   github.com/piacentini/minitemplate
*
*   Forked from:
*   github.com/premasagar/tim
*
*/
var minitemplate=function(){"use strict";var a,b="{{",c="}}",d="[a-z0-9_$][\\.a-z0-9_]*",e=new RegExp(b+"\\s*("+d+")\\s*"+c,"gi");return function(b,c){return b.replace(e,function(b,d){for(var e=d.split("."),f=e.length,g=c,h=0;f>h;h++)if(g=g[e[h]],g===a&&(console.log("minitemplate: "+e[h]+" not found in "+b),g=""),h===f-1)return g})}}();